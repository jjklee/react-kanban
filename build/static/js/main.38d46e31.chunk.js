(this["webpackJsonpreact-kanban"]=this["webpackJsonpreact-kanban"]||[]).push([[0],{126:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4),o=a.n(c),s=(a(69),a(5)),i=a(6),d=a(8),l=a(7),u=a(9),p=a(3),m=a.n(p),h=a(19),f=a(25),v=a(26),g=a(27),C=(a(86),a(54)),b=a(17),E=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(l.a)(t).call(this,e))).handleClickOutside=function(){a.props.handleCancel(a.props.selectedCard)},a.handleChange=function(e){a.setState({text:e.target.value})},a.handleSave=function(){a.props.editCard(a.props.card.id,a.state.text),a.props.handleCancel(a.props.card.id)},a.state={text:""},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({text:this.props.text}),document.getElementsByTagName("textarea")[0].focus()}},{key:"render",value:function(){return r.a.createElement("div",{className:"text-field",id:"textarea"},r.a.createElement("textarea",{ref:!0,style:{height:this.props.height},className:"edit-field",onChange:this.handleChange,defaultValue:this.props.card.text,id:this.props.card.id}),r.a.createElement("div",{className:"card-tools"},r.a.createElement("div",{className:"badges"},r.a.createElement("button",{className:"due"},r.a.createElement(b.b,{className:"tool-icon"}),this.props.dueDate),r.a.createElement("button",{className:"priority"},r.a.createElement(b.a,{className:"tool-icon"}),this.props.card.priority)),r.a.createElement("div",{className:"card-btns"},r.a.createElement("button",{onClick:this.props.handleCancel,id:this.props.card.id},"cancel"),r.a.createElement("button",{onClick:this.handleSave},"save"))))}}]),t}(n.Component),y=Object(C.a)(E),O=a(16);function x(){var e=Object(v.a)(["\n\tbackground-color: white;\n\tborder: 1px solid lightgrey;\n\tborder-radius: 3px;\n\tpadding: 8px 8px 30px 8px;\n\tmargin-bottom: 8px;\n\topacity: ",";\n\tposition: relative;\n\tmin-height: 25px;\n"]);return x=function(){return e},e}var j=g.a.div(x(),(function(e){return e.isDragging?.7:1})),N=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(l.a)(t).call(this,e))).handleOverlay=function(e){var t=e.target.id;a.setState({showEditField:!0,selectedCard:t});var n=o.a.findDOMNode(a.refs[t]);if(n){n.classList.add("selected-card");var r=n.clientHeight-43;a.setState({height:r})}document.getElementById("overlay").classList.add("show-overlay")},a.handleCancel=function(){var e=a.state.selectedCard,t=o.a.findDOMNode(a.refs[e]),n=document.getElementById("overlay");t&&t.classList.remove("selected-card"),n.classList.remove("show-overlay"),a.setState({showEditField:!1})},a.state={selectedCard:null,cards:[],height:"100px"},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.card.due_date?this.props.card.due_date.substring(5):"N/A";return r.a.createElement("div",{ref:this.props.index,className:"cardfield"},this.state.showEditField?r.a.createElement(y,{handleCancel:this.handleCancel,card:this.props.card,editCard:this.props.editCard,selectedCard:this.state.selectedCard,height:this.state.height,dueDate:t}):r.a.createElement(O.b,{draggableId:this.props.card.id,index:this.props.index},(function(a,n){return r.a.createElement(j,Object.assign({},a.draggableProps,a.dragHandleProps,{ref:a.innerRef,isDragging:n.isDragging}),"id:",e.props.card.id,", ind: ",e.props.index," : ",e.props.card.text,r.a.createElement("div",{className:"card-tools"},r.a.createElement("div",{className:"badges"},r.a.createElement("button",{className:"due"},r.a.createElement(b.b,{className:"tool-icon"}),t),r.a.createElement("button",{className:"priority"},r.a.createElement(b.a,{className:"tool-icon"}),e.props.card.priority)),r.a.createElement("div",{className:"card-btns"},r.a.createElement("button",{onClick:e.handleOverlay,id:e.props.index},"edit"),r.a.createElement("button",{onClick:function(){return e.props.removeCard(e.props.card.id)}},"delete"))))})))}}]),t}(r.a.Component);a(126);function k(){var e=Object(v.a)(["\n  padding: 8px;\n  transition: background-color 0.2s ease;\n  background-color ",";\n  flex-grow: 1;\n\tmin-height: 100px;\n\tborder-radius: 3px;\n"]);return k=function(){return e},e}var w=g.a.div(k(),(function(e){return e.isDraggingOver?"#cdced3":"#ebecf0"})),I=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(l.a)(t).call(this,e))).handleAddCard=function(e){e?a.setState({showAddField:!a.state.showAddField,column_id:e.target.id}):a.setState({showAddField:!a.state.showAddField})},a.onSave=function(){var e=a.state,t=e.text,n=e.priority,r=e.due_date,c=e.column_id;if(t.length){var o=a.props.idCounter+1,s=[o].concat(Object(h.a)(a.props.column.card_order));m.a.post("/api/add",{id:o,text:t,priority:n,due_date:r,column_id:c}).then((function(){a.handleAddCard(),a.props.moveCard(c,s)})).then((function(){return a.props.fetchColumns()})).catch((function(e){return console.error("Could not add card")}))}else a.handleAddCard()},a.handleChange=function(e){var t=e.target;a.setState(Object(f.a)({},t.id,t.value))},a.removeCard=function(e){e=parseInt(e);var t=a.props.column.id,n=a.props.column.card_order,r=n.indexOf(e);n.splice(r,1),m.a.delete("/api/delete/".concat(e)).then((function(){return a.props.moveCard(t,n)})).then((function(){return a.props.fetchColumns()})).catch((function(e){return console.error("Could not delete, try again.")}))},a.editCard=function(e,t){m.a.patch("/api/edit",{cardInd:e,text:t}).then((function(){return a.props.fetchColumns()})).catch((function(e){return console.error("Could not edit card, try again.")}))},a.state={showAddField:!1,text:"",priority:1,due_date:"2050-01-01",column_id:null},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"AddCardForm",value:function(){return r.a.createElement("div",{className:"add-form"},r.a.createElement("div",{className:"nums"},r.a.createElement("div",{className:"priority-input"},"priority:",r.a.createElement("input",{type:"number",min:"1",max:"10",defaultValue:"1",className:"form-input",id:"priority",onChange:this.handleChange})),r.a.createElement("div",{className:"date-input"},"due date:",r.a.createElement("input",{id:"due_date",min:"2019-10-31",type:"date",defaultValue:"2050-01-01",className:"form-input",onChange:this.handleChange}))),r.a.createElement("div",{className:"text-input"},r.a.createElement("textarea",{id:"text",placeholder:"Add text for card here..",className:"form-input",onChange:this.handleChange,required:!0})),r.a.createElement("div",{className:"form-tools"},r.a.createElement("button",{onClick:this.handleAddCard},"cancel"),r.a.createElement("button",{onClick:this.onSave},"save")))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"single-column"},r.a.createElement("p",{className:"title"},this.props.column.title),this.state.showAddField?this.AddCardForm():r.a.createElement("button",{className:"add",id:this.props.colInd,onClick:this.handleAddCard},"Add another card"),r.a.createElement(O.c,{droppableId:"".concat(this.props.column.id)},(function(t,a){return r.a.createElement(w,Object.assign({ref:t.innerRef},t.droppableProps,{isDraggingOver:a.isDraggingOver}),e.props.cards.map((function(t,a){return r.a.createElement(N,{key:t.id,index:a,card:t,removeCard:e.removeCard,editCard:e.editCard})})),t.placeholder)})))}}]),t}(r.a.Component);a(127);function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).onDragEnd=function(e){var t=e.destination,n=e.source,r=e.draggableId;r=parseInt(r);var c=parseInt(n.droppableId);if(t&&(t.droppableId!==n.droppableId||t.index!==n.index)){var o=parseInt(t.droppableId),s=a.props.columns[parseInt(n.droppableId)-1],i=a.props.columns[parseInt(t.droppableId)-1];if(s===i){var d=Array.from(s.card_order);d.splice(n.index,1),d.splice(t.index,0,r);var l=S({},s,{card_order:d}),u=Object(h.a)(a.props.columns);return u[l.id-1]=l,a.props.updateColumns(u),void a.moveCard(c,d)}var p=Array.from(s.card_order);p.splice(n.index,1);var m=S({},s,{card_order:p}),f=Array.from(i.card_order);f.splice(t.index,0,r);var v=S({},i,{card_order:f}),g=Object(h.a)(a.props.columns);g[m.id-1]=m,g[v.id-1]=v,a.props.updateColumns(g),a.moveCardAcrossColumns(c,p,o,f),a.updateColumnId(r,t.droppableId)}},a.moveCard=function(e,t){m.a.patch("/api/move",{id:e,card_order:t}).catch((function(e){return console.error("Could not move card, try again.")}))},a.moveCardAcrossColumns=function(e,t,a,n){m.a.patch("/api/moveColumns",{startColId:e,startOrder:t,finishColId:a,finishOrder:n}).catch((function(e){return console.error("Could not move card, try again.")}))},a.updateColumnId=function(e,t){m.a.patch("/api/updateCol",{id:e,column_id:t}).catch((function(e){return console.error("Could not update column, try again.")}))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(O.a,{onDragEnd:this.onDragEnd},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{id:"overlay"}),this.props.columns.map((function(t){var a=t.card_order.map((function(t){return e.props.cards[t]}));return r.a.createElement(I,{key:t.id,column:t,cards:a,colInd:t.id,fetchColumns:e.props.fetchColumns,idCounter:e.props.idCounter,moveCard:e.moveCard})}))))}}]),t}(r.a.Component),D=(a(128),function(e){var t=e.searchResults,a=e.columns;return r.a.createElement("div",{className:"results"},t.length<1?F():P(t,a))}),F=function(){return r.a.createElement("div",{className:"result-card"},r.a.createElement("span",null,"Could not find any cards, try again."))},P=function(e,t){return e.map((function(e,a){return r.a.createElement("div",{key:a,className:"result-card",id:e.id},r.a.createElement("span",null,e.text),r.a.createElement("span",{className:"search-column"},"Found in ",r.a.createElement("strong",null,t[e.column_id-1].title)))}))},R=a(61),B=a.n(R),L=(a(129),function(e){var t=e.handleSearch,a=e.searchResults,n=e.search,c=e.columns;return r.a.createElement("div",{className:"nav"},r.a.createElement("input",{className:"searchbar",type:"search",placeholder:"Search for a card...",onChange:t}),n.length>3?r.a.createElement(D,{searchResults:a,columns:c}):null,r.a.createElement("span",{className:"header"},"react-kanban"),r.a.createElement("div",{className:"portfolio"},r.a.createElement("a",{href:"https://jjklee.com"},"jjklee.com"),r.a.createElement("img",{src:B.a,alt:"logo",className:"logo"})))}),M=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={columns:[],cards:{},searchResults:[],search:"",idCounter:null},a.fetchColumns=function(){m.a.get("/api/columns").then((function(e){var t=e.data;return a.fetchCards(t)})).catch((function(e){return console.log("Could not fetch columns")}))},a.fetchCards=function(e){m.a.get("/api/cards").then((function(e){var t=e.data,a={};return t.map((function(e){return a[e.id]=e})),[a,parseInt(t[t.length-1].id)]})).then((function(t){a.setState({columns:e,cards:t[0],idCounter:t[1]})})).catch((function(e){return console.log("Could not fetch cards")}))},a.updateColumns=function(e){a.setState({columns:e})},a.handleSearch=function(e){var t=e.target.value;a.setState({search:t}),t.length>3&&m.a.get("/api/search",{params:{search:t}}).then((function(e){var t=e.data;return a.setState({searchResults:t})})).catch((function(e){return console.log("Could not find card, try again")}))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchColumns()}},{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(L,{search:this.state.search,handleSearch:this.handleSearch,searchResults:this.state.searchResults,columns:this.state.columns}),r.a.createElement(_,{columns:this.state.columns,cards:this.state.cards,fetchColumns:this.fetchColumns,idCounter:this.state.idCounter,updateColumns:this.updateColumns}))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},61:function(e,t,a){e.exports=a.p+"static/media/favicon.7a64c91f.ico"},64:function(e,t,a){e.exports=a(130)},69:function(e,t,a){},86:function(e,t,a){}},[[64,1,2]]]);
//# sourceMappingURL=main.38d46e31.chunk.js.map