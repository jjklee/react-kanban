(this.webpackJsonpnew=this.webpackJsonpnew||[]).push([[0],{125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(3),o=a.n(c),s=(a(68),a(5)),i=a(6),d=a(8),l=a(7),u=a(9),h=a(4),m=a.n(h),p=a(24),f=a(25),v=a(26),g=(a(85),a(53)),C=a(17),E=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(l.a)(t).call(this,e))).handleClickOutside=function(){a.props.handleCancel(a.props.selectedCard)},a.handleChange=function(e){a.setState({text:e.target.value})},a.handleSave=function(){a.props.editCard(a.props.card.id,a.state.text),a.props.handleCancel(a.props.card.id)},a.state={text:""},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({text:this.props.text}),document.getElementsByTagName("textarea")[0].focus()}},{key:"render",value:function(){return r.a.createElement("div",{className:"text-field",id:"textarea"},r.a.createElement("textarea",Object(p.a)({ref:!0,style:{height:this.props.height},id:"test",className:"edit-field",onChange:this.handleChange,defaultValue:this.props.card.text},"id",this.props.card.id)),r.a.createElement("div",{className:"card-tools"},r.a.createElement("div",{className:"badges"},r.a.createElement("button",{className:"due"},r.a.createElement(C.b,{className:"tool-icon"}),this.props.dueDate),r.a.createElement("button",{className:"priority"},r.a.createElement(C.a,{className:"tool-icon"}),this.props.card.priority)),r.a.createElement("div",{className:"card-btns"},r.a.createElement("button",{onClick:this.props.handleCancel,id:this.props.card.id},"cancel"),r.a.createElement("button",{onClick:this.handleSave},"save"))))}}]),t}(n.Component),b=Object(g.a)(E),y=a(16);function x(){var e=Object(f.a)(["\n\tbackground-color: white;\n\tborder: 1px solid lightgrey;\n\tborder-radius: 3px;\n\tpadding: 8px 8px 30px 8px;\n\tmargin-bottom: 8px;\n\topacity: ",";\n\tposition: relative;\n"]);return x=function(){return e},e}var N=v.a.div(x(),(function(e){return e.isDragging?.7:1})),O=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(l.a)(t).call(this,e))).handleOverlay=function(e){var t=e.target.id;a.setState({showEditField:!0,selectedCard:t});var n=o.a.findDOMNode(a.refs[t]);if(n){n.classList.add("selected-card");var r=n.clientHeight-43;a.setState({height:r})}document.getElementById("overlay").classList.add("show-overlay")},a.handleCancel=function(){var e=a.state.selectedCard,t=o.a.findDOMNode(a.refs[e]),n=document.getElementById("overlay");t&&t.classList.remove("selected-card"),n.classList.remove("show-overlay"),a.setState({showEditField:!1})},a.state={selectedCard:null,cards:[],height:"100px"},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.card.due_date.substring(5);return r.a.createElement("div",{ref:this.props.index,className:"cardfield"},this.state.showEditField?r.a.createElement(b,{handleCancel:this.handleCancel,card:this.props.card,editCard:this.props.editCard,selectedCard:this.state.selectedCard,height:this.state.height,dueDate:t}):r.a.createElement(y.b,{draggableId:"".concat(this.props.card.id),index:this.props.index,ref:this.props.cardId},(function(a,n){return r.a.createElement(N,Object.assign({},a.draggableProps,a.dragHandleProps,{ref:a.innerRef,isDragging:n.isDragging}),e.props.card.text,r.a.createElement("div",{className:"card-tools"},r.a.createElement("div",{className:"badges"},r.a.createElement("button",{className:"due"},r.a.createElement(C.b,{className:"tool-icon"}),t),r.a.createElement("button",{className:"priority"},r.a.createElement(C.a,{className:"tool-icon"}),e.props.card.priority)),r.a.createElement("div",{className:"card-btns"},r.a.createElement("button",{onClick:e.handleOverlay,id:e.props.index},"edit"),r.a.createElement("button",{onClick:function(){return e.props.removeCard(e.props.card.id)}},"delete"))))})))}}]),t}(n.Component);a(125);function j(){var e=Object(f.a)(["\n  padding: 8px;\n  transition: background-color 0.2s ease;\n  background-color ",";\n  flex-grow: 1;\n\tmin-height: 100px;\n\tborder-radius: 3px;\n"]);return j=function(){return e},e}var k=v.a.div(j(),(function(e){return e.isDraggingOver?"#cdced3":"#ebecf0"})),w=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(l.a)(t).call(this,e))).handleAddCard=function(e){e?a.setState({showAddField:!a.state.showAddField,column_id:e.target.id}):a.setState({showAddField:!a.state.showAddField})},a.handleSave=function(){var e=a.state,t=e.text,n=e.priority,r=e.due_date,c=e.column_id,o=a.props.column.card_order,s=a.props.idCounter+1;o.push(s),m.a.post("/api/add",{id:s,text:t,priority:n,due_date:r,column_id:c}).then((function(){a.handleAddCard(),a.props.moveCard(c,o)})).catch((function(e){return console.error(e)}))},a.handleChange=function(e){var t=e.target;a.setState(Object(p.a)({},t.id,t.value))},a.removeCard=function(e){var t=a.props.column.id,n=a.props.column.card_order,r=n.indexOf(e);n.splice(r,1),m.a.delete("/api/delete/".concat(e)).then((function(){a.props.moveCard(t,n)})).catch((function(e){return console.error("Could not delete, try again.")}))},a.editCard=function(e,t){m.a.patch("/api/edit",{cardInd:e,text:t}).then((function(){return a.props.fetchColumns()})).catch((function(e){return console.error("Could not edit card, try again.")}))},a.state={showAddField:!1,text:"",priority:1,due_date:"2050-01-01",column_id:null},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"AddCardForm",value:function(){return r.a.createElement("div",{className:"add-form"},r.a.createElement("div",{className:"nums"},r.a.createElement("div",{className:"priority-input"},"priority:",r.a.createElement("input",{type:"number",min:"1",max:"10",defaultValue:"1",className:"form-input",id:"priority",onChange:this.handleChange})),r.a.createElement("div",{className:"date-input"},"due date:",r.a.createElement("input",{id:"due_date",min:"2019-10-31",type:"date",defaultValue:"2050-01-01",className:"form-input",onChange:this.handleChange}))),r.a.createElement("div",{className:"text-input"},r.a.createElement("textarea",{id:"text",placeholder:"Add text for card here..",className:"form-input",onChange:this.handleChange})),r.a.createElement("div",{className:"form-tools"},r.a.createElement("button",{onClick:this.handleAddCard},"cancel"),r.a.createElement("button",{onClick:this.handleSave},"save")))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"single-column"},r.a.createElement("p",{className:"title"},this.props.column.title),this.state.showAddField?this.AddCardForm():r.a.createElement("button",{className:"add",id:this.props.colInd,onClick:this.handleAddCard},"Add another card"),r.a.createElement(y.c,{droppableId:"".concat(this.props.column.id)},(function(t,a){return r.a.createElement(k,Object.assign({ref:t.innerRef},t.droppableProps,{isDraggingOver:a.isDraggingOver}),e.props.column.cards.map((function(t,a){return r.a.createElement(O,{key:a,card:t,removeCard:e.removeCard,editCard:e.editCard,index:a})})),t.placeholder)})))}}]),t}(r.a.Component),S=(a(126),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).onDragEnd=function(e){var t=e.destination,n=e.source,r=e.draggableId,c=a.props.columns,o=parseInt(r);if(t&&(t.droppableId!==n.droppableId||t.index!==n.index)){var s=parseInt(n.droppableId),i=parseInt(t.droppableId);if(s===i){var d=c[s-1].card_order;return d.splice(n.index,1),d.splice(t.index,0,o),a.props.fetchColumns(),void a.moveCard(s,d)}var l=c[s-1].card_order,u=c[i-1].card_order;l.splice(n.index,1),u.splice(t.index,0,o),c[s-1].card_order=l,c[i-1].card_order=u,a.props.fetchColumns(),a.moveCard(s,l),a.moveCard(i,u),a.updateColumnId(o,i)}},a.moveCard=function(e,t){t=JSON.stringify(t),m.a.patch("/api/move",{id:e,card_order:t}).then((function(){return a.props.fetchColumns()})).catch((function(e){return console.error("Could not move card, try again.")}))},a.updateColumnId=function(e,t){m.a.patch("/api/updateCol",{id:e,column_id:t}).then((function(){return a.props.fetchColumns()})).catch((function(e){return console.error("Could not update column, try again.")}))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(y.a,{onDragEnd:this.onDragEnd},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{id:"overlay"}),this.props.columns.map((function(t,a){return r.a.createElement(w,{key:a,column:t,colInd:t.id,fetchColumns:e.props.fetchColumns,idCounter:e.props.idCounter,moveCard:e.moveCard})}))))}}]),t}(n.Component)),_=(a(127),function(e){var t=e.searchResults,a=e.columns;return r.a.createElement("div",{className:"results"},t.length<1?I():A(t,a))}),I=function(){return r.a.createElement("div",{className:"result-card"},r.a.createElement("span",null,"Could not find any cards, try again."))},A=function(e,t){return e.map((function(e,a){return r.a.createElement("div",{key:a,className:"result-card",id:e.id},r.a.createElement("span",null,e.text),r.a.createElement("span",{className:"search-column"},"Found in ",r.a.createElement("strong",null,t[e.column_id-1].title)))}))},D=a(60),F=a.n(D),R=(a(128),function(e){var t=e.handleSearch,a=e.searchResults,n=e.search,c=e.columns;return r.a.createElement("div",{className:"nav"},r.a.createElement("input",{className:"searchbar",type:"search",placeholder:"Search for a card...",onChange:t}),n.length>3?r.a.createElement(_,{searchResults:a,columns:c}):null,r.a.createElement("span",{className:"header"},"react-kanban"),r.a.createElement("div",{className:"portfolio"},r.a.createElement("a",{href:"https://jjklee.com"},"jjklee.com"),r.a.createElement("img",{src:F.a,alt:"logo",className:"logo"})))}),B=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={columns:[],searchResults:[],search:"",idCounter:null},a.fetchColumns=function(){m.a.get("/api/columns").then((function(e){var t=e.data;t.forEach((function(e){e.cards=[]})),a.fetchCards(t)})).catch((function(e){return console.log("Could not fetch columns")}))},a.fetchCards=function(e){m.a.get("/api/cards").then((function(t){for(var n=t.data,r=e,c=0;c<r.length;c++)for(var o=0;o<r[c].card_order.length;o++)r[c].cards.push(n[r[c].card_order[o]-1]);a.setState({columns:r,idCounter:n[n.length-1].id})})).catch((function(e){return console.log("Could not fetch cards")}))},a.handleSearch=function(e){var t=e.target.value;a.setState({search:t}),t.length>3&&m.a.get("/api/search",{params:{search:t}}).then((function(e){var t=e.data;return a.setState({searchResults:t})})).catch((function(e){return console.log("Could not find card, try again")}))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchColumns()}},{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(R,{search:this.state.search,handleSearch:this.handleSearch,searchResults:this.state.searchResults,columns:this.state.columns}),r.a.createElement(S,{columns:this.state.columns,fetchColumns:this.fetchColumns,idCounter:this.state.idCounter}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},60:function(e,t,a){e.exports=a.p+"static/media/favicon.7a64c91f.ico"},63:function(e,t,a){e.exports=a(129)},68:function(e,t,a){},85:function(e,t,a){}},[[63,1,2]]]);
//# sourceMappingURL=main.a8882c5a.chunk.js.map